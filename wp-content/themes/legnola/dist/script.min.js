!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(g){"use strict";function a(e,t,a,n){var i,s={raw:{}};for(i in n=n||{})n.hasOwnProperty(i)&&("classes"===e?(s.raw[n[i]]=t+"-"+n[i],s[n[i]]="."+t+"-"+n[i]):(s.raw[i]=n[i],s[i]=n[i]+"."+t));for(i in a)a.hasOwnProperty(i)&&(s[i]="classes"===e?(s.raw[i]=a[i].replace(/{ns}/g,t),a[i].replace(/{ns}/g,"."+t)):(s.raw[i]=a[i].replace(/.{ns}/g,""),a[i].replace(/{ns}/g,t)));return s}function e(){m.windowWidth=m.$window.width(),m.windowHeight=m.$window.height(),p=d.startTimer(p,h,t)}function t(){for(var e in m.ResizeHandlers)m.ResizeHandlers.hasOwnProperty(e)&&m.ResizeHandlers[e].callback.call(window,m.windowWidth,m.windowHeight)}function n(e,t){return parseInt(e.priority)-parseInt(t.priority)}var i,s,o,r="undefined"!=typeof window?window:this,l=r.document,c=function(){this.Version="@version",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=r,this.$window=g(r),this.document=l,this.$document=g(l),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},d={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(e){}},killGesture:function(e){try{e.preventDefault()}catch(e){}},lockViewport:function(e){f[e]=!0,g.isEmptyObject(f)||y||(i.length?i.attr("content",o):i=g("head").append('<meta name="viewport" content="'+o+'">'),m.$body.on(w.gestureChange,d.killGesture).on(w.gestureStart,d.killGesture).on(w.gestureEnd,d.killGesture),y=!0)},unlockViewport:function(e){"undefined"!==g.type(f[e])&&delete f[e],g.isEmptyObject(f)&&y&&(i.length&&(s?i.attr("content",s):i.remove()),m.$body.off(w.gestureChange).off(w.gestureStart).off(w.gestureEnd),y=!1)},startTimer:function(e,t,a,n){return d.clearTimer(e),n?setInterval(a,t):setTimeout(a,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(e,10)-parseInt(t,10)},sortDesc:function(e,t){return parseInt(t,10)-parseInt(e,10)},decodeEntities:function(e){var t=m.document.createElement("textarea");return t.innerHTML=e,t.value},parseQueryString:function(e){for(var t={},a=e.slice(e.indexOf("?")+1).split("&"),n=0;n<a.length;n++){var i=a[n].split("=");t[i[0]]=i[1]}return t}},m=new c,u=g.Deferred(),v={base:"{ns}",element:"{ns}-element"},w={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",gestureChange:"gesturechange.{ns}",gestureStart:"gesturestart.{ns}",gestureEnd:"gestureend.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"},p=null,h=20,f=[],y=!1;return c.prototype.NoConflict=function(){for(var e in m.DontConflict=!0,m.Plugins)m.Plugins.hasOwnProperty(e)&&(g[e]=m.Conflicts[e],g.fn[e]=m.Conflicts.fn[e])},c.prototype.Ready=function(e){"complete"===m.document.readyState||"loading"!==m.document.readyState&&!m.document.documentElement.doScroll?e():m.document.addEventListener("DOMContentLoaded",e)},c.prototype.Plugin=function(e,t){return m.Plugins[e]=function(u,p){function h(e){return e.data(f)}var e="fs-"+u,f="fs"+u.replace(/(^|\s)([a-z])/g,function(e,t,a){return t+a.toUpperCase()});return p.initialized=!1,p.priority=p.priority||10,p.classes=a("classes",e,v,p.classes),p.events=a("events",u,w,p.events),p.functions=g.extend({getData:h,iterate:function(e){for(var t=Array.prototype.slice.call(arguments,1),a=0,n=this.length;a<n;a++){var i=this.eq(a),s=h(i)||{};"undefined"!==g.type(s.$el)&&e.apply(i,[s].concat(t))}return this}},d,p.functions),p.methods=g.extend(!0,{_construct:g.noop,_postConstruct:g.noop,_destruct:g.noop,_resize:!1,destroy:function(e){p.functions.iterate.apply(this,[p.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(p.classes.raw.element).removeData(f)}},p.methods),p.utilities=g.extend(!0,{_initialize:!1,_delegate:!1,defaults:function(e){p.defaults=g.extend(!0,p.defaults,e||{})}},p.utilities),p.widget&&(m.Conflicts.fn[u]=g.fn[u],g.fn[f]=function(e){if(this instanceof g){var t=p.methods[e];if("object"===g.type(e)||!e)return function(e){var t,a,n,i="object"===g.type(e),s=Array.prototype.slice.call(arguments,i?1:0),o=g();for(e=g.extend(!0,{},p.defaults||{},i?e:{}),a=0,n=this.length;a<n;a++)if(!h(t=this.eq(a))){p.guid++;var r="__"+p.guid,l=p.classes.raw.base+r,c=t.data(u+"-options"),d=g.extend(!0,{$el:t,guid:r,numGuid:p.guid,rawGuid:l,dotGuid:"."+l},e,"object"===g.type(c)?c:{});t.addClass(p.classes.raw.element).data(f,d),p.methods._construct.apply(t,[d].concat(s)),o=o.add(t)}for(a=0,n=o.length;a<n;a++)t=o.eq(a),p.methods._postConstruct.apply(t,[h(t)]);return this}.apply(this,arguments);if(t&&0!==e.indexOf("_")){var a=[t].concat(Array.prototype.slice.call(arguments,1));return p.functions.iterate.apply(this,a)}return this}},m.DontConflict||(g.fn[u]=g.fn[f])),m.Conflicts[u]=g[u],g[f]=p.utilities._delegate||function(e){var t=p.utilities[e]||p.utilities._initialize||!1;if(t){var a=Array.prototype.slice.call(arguments,"object"===g.type(e)?0:1);return t.apply(window,a)}},m.DontConflict||(g[u]=g[f]),p.namespace=u,p.namespaceClean=f,p.guid=0,p.methods._resize&&(m.ResizeHandlers.push({namespace:u,priority:p.priority,callback:p.methods._resize}),m.ResizeHandlers.sort(n)),p.methods._raf&&(m.RAFHandlers.push({namespace:u,priority:p.priority,callback:p.methods._raf}),m.RAFHandlers.sort(n)),p}(e,t),m.Plugins[e]},m.$window.on("resize.fs",e),e(),function e(){if(m.support.raf)for(var t in m.window.requestAnimationFrame(e),m.RAFHandlers)m.RAFHandlers.hasOwnProperty(t)&&m.RAFHandlers[t].callback.call(window)}(),m.Ready(function(){m.$body=g("body"),g("html").addClass(m.support.touch?"touchevents":"no-touchevents"),i=g('meta[name="viewport"]'),s=!!i.length&&i.attr("content"),o="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",u.resolve()}),w.clickTouchStart=w.click+" "+w.touchStart,function(){var e,t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},a=["transition","-webkit-transition"],n={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},i="transitionend",s="",o="",r=document.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in r.style){i=t[e],m.support.transition=!0;break}for(e in w.transitionEnd=i+".{ns}",a)if(a.hasOwnProperty(e)&&a[e]in r.style){s=a[e];break}for(e in m.transition=s,n)if(n.hasOwnProperty(e)&&n[e]in r.style){m.support.transform=!0,o=n[e];break}m.transform=o}(),window.Formstone=m}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./transition"],e):e(jQuery,Formstone)}(function(c,n){"use strict";function e(){(k=x.scrollTop()+n.windowHeight)<0&&(k=0),$.iterate.call(T,r)}function t(){P=c(w.base),T=c(w.lazy),$.iterate.call(T,o)}function a(e){if(e.visible){var t=e.source;e.source=null,i(e,t,!0)}}function i(e,t,a){if(t!==e.source&&e.visible){if(e.source=t,e.responsive=!1,e.isYouTube=!1,"object"===c.type(t)&&"string"===c.type(t.video)){var n=t.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);n&&1<=n.length&&(e.isYouTube=!0,e.videoId=n[1])}var i=!e.isYouTube&&"object"===c.type(t)&&(t.hasOwnProperty("mp4")||t.hasOwnProperty("ogg")||t.hasOwnProperty("webm"));if(e.video=e.isYouTube||i,e.playing=!1,e.isYouTube)e.playerReady=!1,e.posterLoaded=!1,p(e,t,a);else if("object"===c.type(t)&&t.hasOwnProperty("poster"))!function(t,e,a){t.source&&t.source.poster&&(u(t,t.source.poster,!0,!0),a=!1);var n='<div class="'+[y.media,y.video,!0!==a?y.animated:""].join(" ")+'" aria-hidden="true">';n+="<video playsinline",t.loop&&(n+=" loop"),t.mute&&(n+=" muted"),t.autoPlay&&(n+=" autoplay"),n+=">",t.source.webm&&(n+='<source src="'+t.source.webm+'" type="video/webm" />'),t.source.mp4&&(n+='<source src="'+t.source.mp4+'" type="video/mp4" />'),t.source.ogg&&(n+='<source src="'+t.source.ogg+'" type="video/ogg" />'),n+="</video>";var i=c(n+="</div>");i.find("video").one(b.loadedMetaData,function(e){i.fsTransition({property:"opacity"},function(){h(t)}).css({opacity:1}),g(t),t.$el.trigger(b.loaded),t.autoPlay&&f(t)}),t.$container.append(i)}(e,0,a);else{var s=t;if("object"===c.type(t)){var o,r=[],l=[];for(o in t)t.hasOwnProperty(o)&&l.push(o);for(o in l.sort($.sortAsc),l)l.hasOwnProperty(o)&&r.push({width:parseInt(l[o]),url:t[l[o]],mq:C.matchMedia("(min-width: "+parseInt(l[o])+"px)")});e.responsive=!0,e.sources=r,s=d(e)}u(e,s,!1,a)}}else e.$el.trigger(b.loaded)}function d(e){var t=e.source;if(e.responsive)for(var a in t=e.sources[0].url,e.sources)e.sources.hasOwnProperty(a)&&(n.support.matchMedia?e.sources[a].mq.matches&&(t=e.sources[a].url):e.sources[a].width<n.fallbackWidth&&(t=e.sources[a].url));return t}function u(e,t,a,n){var i=[y.media,y.image,!0!==n?y.animated:""].join(" "),s=c('<div class="'+i+'" aria-hidden="true"><img alt="'+e.alt+'"></div>'),o=s.find("img"),r=t;o.one(b.load,function(){M&&s.addClass(y.native).css({backgroundImage:"url('"+r+"')"}),s.fsTransition({property:"opacity"},function(){a||h(e)}).css({opacity:1}),g(e),a&&!n||e.$el.trigger(b.loaded)}).one(b.error,e,l).attr("src",r),e.responsive&&s.addClass(y.responsive),e.$container.append(s),(o[0].complete||4===o[0].readyState)&&o.trigger(b.load),e.currentSource=r}function p(t,e,a){if(!t.videoId){var n=e.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);t.videoId=n[1]}if(t.posterLoaded||(t.source.poster||(t.source.poster="//img.youtube.com/vi/"+t.videoId+"/0.jpg"),t.posterLoaded=!0,u(t,t.source.poster,!0,a),a=!1),c("script[src*='youtube.com/iframe_api']").length||c("head").append('<script src="//www.youtube.com/iframe_api"><\/script>'),I){var i=t.guid+"_"+t.youTubeGuid++,s='<div class="'+[y.media,y.embed,!0!==a?y.animated:""].join(" ")+'" aria-hidden="true">';s+='<div id="'+i+'"></div>';var o=c(s+="</div>"),r=c.extend(!0,{},{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:i,loop:t.loop?1:0,autoplay:1,origin:C.location.protocol+"//"+C.location.host},t.youtubeOptions);r.autoplay=1,t.$container.append(o),t.player&&(t.oldPlayer=t.player,t.player=null),t.player=new C.YT.Player(i,{videoId:t.videoId,playerVars:r,events:{onReady:function(e){t.playerReady=!0,t.mute&&t.player.mute(),t.autoPlay||t.player.pauseVideo()},onStateChange:function(e){t.playing||e.data!==C.YT.PlayerState.PLAYING?t.loop&&t.playing&&e.data===C.YT.PlayerState.ENDED&&t.player.playVideo():(t.playing=!0,o.fsTransition({property:"opacity"},function(){h(t)}).css({opacity:1}),g(t),t.$el.trigger(b.loaded)),t.$el.find(w.embed).addClass(y.ready)},onPlaybackQualityChange:function(e){},onPlaybackRateChange:function(e){},onError:function(e){l({data:t})},onApiChange:function(e){}}}),g(t)}else j.push({data:t,source:e})}function h(e){var t=e.$container.find(w.media);1<=t.length&&(t.not(":last").remove(),e.oldPlayer=null)}function l(e){e.data.$el.trigger(b.error)}function f(e){if(e.video&&!e.playing)if(e.isYouTube)e.playerReady?e.player.playVideo():e.autoPlay=!0;else{var t=e.$container.find("video");t.length&&t[0].play(),e.playing=!0}}function s(e){if(e.visible)if(e.responsive){var t=d(e);t!==e.currentSource?u(e,t,!1,!0):g(e)}else g(e)}function g(e){for(var t=e.$container.find(w.media),a=0,n=t.length;a<n;a++){var i=t.eq(a),s=e.isYouTube?"iframe":i.find("video").length?"video":"img",o=i.find(s);if(o.length&&("img"!==s||!M)){var r=e.$el.outerWidth(),l=e.$el.outerHeight(),c=m(e,o);e.width=c.width,e.height=c.height,e.left=0,e.top=0;var d=e.isYouTube?e.embedRatio:e.width/e.height;e.height=l,e.width=e.height*d,e.width<r&&(e.width=r,e.height=e.width/d),e.left=-(e.width-r)/2,e.top=-(e.height-l)/2,i.css({height:e.height,width:e.width,left:e.left,top:e.top})}}}function o(e){e.scrollTop=e.$el.offset().top}function r(e){!e.visible&&e.scrollTop<k+e.lazyEdge&&(e.visible=!0,a(e))}function m(e,t){if(e.isYouTube)return{height:500,width:500/e.embedRatio};if(t.is("img")){var a=t[0];if("undefined"!==c.type(a.naturalHeight))return{height:a.naturalHeight,width:a.naturalWidth};var n=new Image;return n.src=a.src,{height:n.height,width:n.width}}return{height:t[0].videoHeight,width:t[0].videoWidth}}var v=n.Plugin("background",{widget:!0,defaults:{alt:"",autoPlay:!0,customClass:"",embedRatio:1.777777,lazy:!1,lazyEdge:100,loop:!0,mute:!0,source:null,youtubeOptions:{}},classes:["container","media","animated","responsive","native","fixed","ready","lazy"],events:{loaded:"loaded",ready:"ready",loadedMetaData:"loadedmetadata"},methods:{_construct:function(e){e.youTubeGuid=0,e.$container=c('<div class="'+y.container+'"></div>').appendTo(this),e.thisClasses=[y.base,e.customClass],e.visible=!0,e.lazy&&(e.visible=!1,e.thisClasses.push(y.lazy)),this.addClass(e.thisClasses.join(" ")),t(),e.lazy?(o(e),r(e)):a(e)},_destruct:function(e){e.$container.remove(),this.removeClass(e.thisClasses.join(" ")).off(b.namespace),t()},_resize:function(){$.iterate.call(P,s),$.iterate.call(T,o),$.iterate.call(T,r)},play:f,pause:function(e){if(e.video&&e.playing){if(e.isYouTube)e.playerReady?e.player.pauseVideo():e.autoPlay=!1;else{var t=e.$container.find("video");t.length&&t[0].pause()}e.playing=!1}},mute:function(e){if(e.video)if(e.isYouTube&&e.playerReady)e.player.mute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!0)}e.mute=!0},unmute:function(e){if(e.video){if(e.isYouTube&&e.playerReady)e.player.unMute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!1)}e.playing=!0}e.mute=!1},resize:g,load:i,unload:function(e){var t=e.$container.find(w.media);1<=t.length&&t.fsTransition({property:"opacity"},function(){t.remove(),delete e.source}).css({opacity:0})}}}),w=v.classes,y=w.raw,b=v.events,$=v.functions,C=n.window,x=n.$window,k=0,P=[],T=[],M="backgroundSize"in n.document.documentElement.style,I=!1,j=[];n.Ready(function(){e(),x.on("scroll",e)}),C.onYouTubeIframeAPIReady=function(){for(var e in I=!0,j)j.hasOwnProperty(e)&&p(j[e].data,j[e].source);j=[]}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(m,s){"use strict";function o(e){e.preventManipulation&&e.preventManipulation();var t=e.data,a=e.originalEvent;if(a.type.match(/(up|end|cancel)$/i))f(e);else{if(a.pointerId){var n=!1;for(var i in t.touches)t.touches[i].id===a.pointerId&&(n=!0,t.touches[i].pageX=a.pageX,t.touches[i].pageY=a.pageY);n||t.touches.push({id:a.pointerId,pageX:a.pageX,pageY:a.pageY})}else t.touches=a.touches;a.type.match(/(down|start)$/i)?v(e):a.type.match(/move$/i)&&r(e)}}function v(e){var t=e.data,a="undefined"!==m.type(t.touches)&&t.touches.length?t.touches[0]:null;a&&t.$el.off($.mouseDown),t.touching||(t.startE=e.originalEvent,t.startX=a?a.pageX:e.pageX,t.startY=a?a.pageY:e.pageY,t.startT=(new Date).getTime(),t.scaleD=1,t.passedAxis=!1),t.$links&&t.$links.off($.click);var n=y(t.scale?$.scaleStart:$.panStart,e,t.startX,t.startY,t.scaleD,0,0,"","");if(t.scale&&t.touches&&2<=t.touches.length){var i=t.touches;t.pinch={startX:g(i[0].pageX,i[1].pageX),startY:g(i[0].pageY,i[1].pageY),startD:b(i[1].pageX-i[0].pageX,i[1].pageY-i[0].pageY)},n.pageX=t.startX=t.pinch.startX,n.pageY=t.startY=t.pinch.startY}t.touching||(t.touching=!0,t.pan&&!a&&x.on($.mouseMove,t,r).on($.mouseUp,t,f),s.support.pointer?x.on([$.pointerMove,$.pointerUp,$.pointerCancel].join(" "),t,o):x.on([$.touchMove,$.touchEnd,$.touchCancel].join(" "),t,o),t.$el.trigger(n))}function r(e){var t=e.data,a="undefined"!==m.type(t.touches)&&t.touches.length?t.touches[0]:null,n=a?a.pageX:e.pageX,i=a?a.pageY:e.pageY,s=n-t.startX,o=i-t.startY,r=0<s?"right":"left",l=0<o?"down":"up",c=Math.abs(s)>t.threshold,d=Math.abs(o)>t.threshold;if(!t.passedAxis&&t.axis&&(t.axisX&&d||t.axisY&&c))f(e);else{!t.passedAxis&&(!t.axis||t.axis&&t.axisX&&c||t.axisY&&d)&&(t.passedAxis=!0),t.passedAxis&&(C.killEvent(e),C.killEvent(t.startE));var u=!0,p=y(t.scale?$.scale:$.pan,e,n,i,t.scaleD,s,o,r,l);if(t.scale)if(t.touches&&2<=t.touches.length){var h=t.touches;t.pinch.endX=g(h[0].pageX,h[1].pageX),t.pinch.endY=g(h[0].pageY,h[1].pageY),t.pinch.endD=b(h[1].pageX-h[0].pageX,h[1].pageY-h[0].pageY),t.scaleD=t.pinch.endD/t.pinch.startD,p.pageX=t.pinch.endX,p.pageY=t.pinch.endY,p.scale=t.scaleD,p.deltaX=t.pinch.endX-t.pinch.startX,p.deltaY=t.pinch.endY-t.pinch.startY}else t.pan||(u=!1);u&&t.$el.trigger(p)}}function f(e){var t=e.data,a="undefined"!==m.type(t.touches)&&t.touches.length?t.touches[0]:null,n=a?a.pageX:e.pageX,i=a?a.pageY:e.pageY,s=n-t.startX,o=i-t.startY,r=(new Date).getTime(),l=t.scale?$.scaleEnd:$.panEnd,c=0<s?"right":"left",d=0<o?"down":"up",u=1<Math.abs(s),p=1<Math.abs(o);if(t.swipe&&r-t.startT<t.time&&Math.abs(s)>t.threshold&&(l=$.swipe),t.axis&&(t.axisX&&p||t.axisY&&u)||u||p){t.$links=t.$el.find("a");for(var h=0,f=t.$links.length;h<f;h++)w(t.$links.eq(h),t)}var g=y(l,e,n,i,t.scaleD,s,o,c,d);x.off([$.touchMove,$.touchEnd,$.touchCancel,$.mouseMove,$.mouseUp,$.pointerMove,$.pointerUp,$.pointerCancel].join(" ")),t.$el.trigger(g),t.touches=[],t.scale,a&&(t.touchTimer=C.startTimer(t.touchTimer,5,function(){t.$el.on($.mouseDown,t,v)})),t.touching=!1}function w(e,t){e.on($.click,t,n);var a=m._data(e[0],"events").click;a.unshift(a.pop())}function n(e){C.killEvent(e,!0),e.data.$links.off($.click)}function y(e,t,a,n,i,s,o,r,l){return m.Event(e,{originalEvent:t,bubbles:!0,pageX:a,pageY:n,scale:i,deltaX:s,deltaY:o,directionX:r,directionY:l})}function g(e,t){return(e+t)/2}function b(e,t){return Math.sqrt(e*e+t*t)}function a(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var e=!s.window.PointerEvent,t=s.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1,threshold:10,time:50},methods:{_construct:function(e){if(e.touches=[],e.touching=!1,this.on($.dragStart,C.killEvent),e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axisX="x"===e.axis,e.axisY="y"===e.axis,s.support.pointer){var t="";!e.axis||e.axisX&&e.axisY?t="none":(e.axisX&&(t+=" pan-y"),e.axisY&&(t+=" pan-x")),a(this,t),this.on($.pointerDown,e,o)}else this.on($.touchStart,e,o).on($.mouseDown,e,v)},_destruct:function(e){this.off($.namespace),a(this,"")}},events:{pointerDown:e?"MSPointerDown":"pointerdown",pointerUp:e?"MSPointerUp":"pointerup",pointerMove:e?"MSPointerMove":"pointermove",pointerCancel:e?"MSPointerCancel":"pointercancel"}}),$=t.events,C=t.functions,x=s.$window;$.pan="pan",$.panStart="panstart",$.panEnd="panend",$.scale="scale",$.scaleStart="scalestart",$.scaleEnd="scaleend",$.swipe="swipe"}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(r,e){"use strict";function t(){h=p.height(),u.iterate.call(m,l)}function a(){m=r(o.base),t()}function n(e){if(e.hasParent){var t=e.$parent.scrollTop();t!==e.parentScroll&&(i(e),e.parentScroll=t)}}function l(e){if(e.initialized){switch(e.parentHeight=e.hasParent?e.$parent.outerHeight(!1):h,e.windowIntersect){case"top":e.windowCheck=0-e.offset;break;case"middle":case"center":e.windowCheck=e.parentHeight/2-e.offset;break;case"bottom":e.windowCheck=e.parentHeight-e.offset}switch(e.elOffset=e.$target.offset(),e.elIntersect){case"top":e.elCheck=e.elOffset.top;break;case"middle":e.elCheck=e.elOffset.top+e.$target.outerHeight()/2;break;case"bottom":e.elCheck=e.elOffset.top+e.$target.outerHeight()}if(e.hasParent){var t=e.$parent.offset();e.elCheck-=t.top}i(e)}}function i(e){e.initialized&&(e.windowCheck+(e.hasParent?e.parentScroll:f)>=e.elCheck?(e.active||e.$el.trigger(d.activate),e.active=!0,e.$el.addClass(c.active)):e.reverse&&(e.active&&e.$el.trigger(d.deactivate),e.active=!1,e.$el.removeClass(c.active)))}var s=e.Plugin("checkpoint",{widget:!0,defaults:{intersect:"bottom-top",offset:0,reverse:!1},classes:["active"],events:{activate:"activate",deactivate:"deactivate"},methods:{_construct:function(e){e.initialized=!1;var t=r(e.$el.data("checkpoint-parent")),a=r(e.$el.data("checkpoint-container")),n=e.$el.data("checkpoint-intersect"),i=e.$el.data("checkpoint-offset");n&&(e.intersect=n),i&&(e.offset=i);var s=e.intersect.split("-");e.windowIntersect=s[0],e.elIntersect=s[1],e.visible=!1,e.$target=a.length?a:e.$el,e.hasParent=0<t.length,e.$parent=t;var o=e.$target.find("img");o.length&&o.on(d.load,e,l),e.$el.addClass(c.base),e.initialized=!0},_postConstruct:function(e){a(),t()},_destruct:function(e){e.$el.removeClass(c.base),a()},_resize:t,_raf:function(){(f=p.scrollTop())<0&&(f=0),f!==g&&(u.iterate.call(m,i),g=f),u.iterate.call(m,n)},resize:l}}),o=(s.namespace,s.classes),c=o.raw,d=s.events,u=s.functions,p=(e.window,e.$window),h=0,f=0,g=0,m=[]}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(s,e){"use strict";function o(){(function(){for(var e in i={unit:r.unit},g)if(g.hasOwnProperty(e))for(var t in f[e])if(f[e].hasOwnProperty(t)){var a="Infinity"===t?1/0:parseInt(t,10),n=-1<e.indexOf("max");f[e][t].matches&&(n?(!i[e]||a<i[e])&&(i[e]=a):(!i[e]||a>i[e])&&(i[e]=a))}})(),a.trigger(d.mqChange,[i])}function l(e){var t=c(e.media),a=h[t],n=e.matches,i=n?d.enter:d.leave;if(a&&(a.active||!a.active&&n)){for(var s in a[i])a[i].hasOwnProperty(s)&&a[i][s].apply(a.mq);a.active=!0}}function c(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}var t=e.Plugin("mediaquery",{utilities:{_initialize:function(e){for(var t in e=e||{},g)g.hasOwnProperty(t)&&(r[t]=e[t]?s.merge(e[t],r[t]):r[t]);for(var a in(r=s.extend(r,e)).minWidth.sort(p.sortDesc),r.maxWidth.sort(p.sortAsc),r.minHeight.sort(p.sortDesc),r.maxHeight.sort(p.sortAsc),g)if(g.hasOwnProperty(a))for(var n in f[a]={},r[a])if(r[a].hasOwnProperty(n)){var i=window.matchMedia("("+g[a]+": "+(r[a][n]===1/0?1e5:r[a][n])+r.unit+")");i.addListener(o),f[a][r[a][n]]=i}o()},state:function(){return i},bind:function(e,t,a){var n=u.matchMedia(t),i=c(n.media);for(var s in h[i]||(h[i]={mq:n,active:!0,enter:{},leave:{}},h[i].mq.addListener(l)),a)a.hasOwnProperty(s)&&h[i].hasOwnProperty(s)&&(h[i][s][e]=a[s]);var o=h[i],r=n.matches;r&&o[d.enter].hasOwnProperty(e)?(o[d.enter][e].apply(n),o.active=!0):!r&&o[d.leave].hasOwnProperty(e)&&(o[d.leave][e].apply(n),o.active=!1)},unbind:function(e,t){if(e)if(t){var a=c(t);h[a]&&(h[a].enter[e]&&delete h[a].enter[e],h[a].leave[e]&&delete h[a].leave[e])}else for(var n in h)h.hasOwnProperty(n)&&(h[n].enter[e]&&delete h[n].enter[e],h[n].leave[e]&&delete h[n].leave[e])}},events:{mqChange:"mqchange"}}),r={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},d=s.extend(t.events,{enter:"enter",leave:"leave"}),a=e.$window,u=a[0],p=t.functions,i=null,h=[],f={},g={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./swap"],e):e(jQuery,Formstone)}(function(s,e){"use strict";function a(e){e.$handle.fsSwap("deactivate")}function o(e){e.data.$handle.addClass(g.focus)}function r(e){e.data.$handle.removeClass(g.focus)}function l(e){var t=e.data;13!==e.keyCode&&32!==e.keyCode||(v.killEvent(e),t.$handle.trigger(m.raw.click))}function c(e){if(!e.originalEvent){var t=e.data;t.open||(t.$el.trigger(m.open).attr("aria-hidden",!1),t.$content.addClass(t.contentClassesOpen).one(m.click,function(){a(t)}),t.$handle.attr("aria-expanded",!0),t.label&&t.$handle.html(t.labels.open),t.isToggle||w.addClass(g.lock),t.open=!0,t.$nav.focus())}}function d(e){if(!e.originalEvent){var t=e.data;t.open&&(t.$el.trigger(m.close).attr("aria-hidden",!0),t.$content.removeClass(t.contentClassesOpen).off(m.namespace),t.$handle.attr("aria-expanded",!1),t.label&&t.$handle.html(t.labels.closed),n(t),t.open=!1,t.$el.focus())}}function u(e){var t=e.data;t.$el.attr("aria-hidden",!0),t.$handle.attr("aria-controls",t.ariaId).attr("aria-expanded",!1),t.$content.addClass(g.enabled),setTimeout(function(){t.$animate.addClass(g.animated)},0),t.label&&t.$handle.html(t.labels.closed)}function p(e){var t=e.data;t.$el.removeAttr("aria-hidden"),t.$handle.removeAttr("aria-controls").removeAttr("aria-expanded"),t.$content.removeClass(g.enabled,g.animated),t.$animate.removeClass(g.animated),i(t),n(t)}function n(e){e.isToggle||w.removeClass(g.lock)}function i(e){if(e.label)if(1<e.$handle.length)for(var t=0,a=e.$handle.length;t<a;t++)e.$handle.eq(t).html(e.originalLabel[t]);else e.$handle.html(e.originalLabel)}var t=e.Plugin("navigation",{widget:!0,defaults:{customClass:"",gravity:"left",label:!0,labels:{closed:"Menu",open:"Close"},maxWidth:"980px",theme:"fs-light",type:"toggle"},classes:["handle","nav","content","animated","enabled","focus","open","toggle","push","reveal","overlay","left","right","lock"],events:{open:"open",close:"close"},methods:{_construct:function(e){e.handleGuid=g.handle+e.guid,e.isToggle="toggle"===e.type,e.open=!1,e.isToggle&&(e.gravity="");var t=g.base,a=[t,e.type].join("-"),n=e.gravity?[a,e.gravity].join("-"):"",i=[e.rawGuid,e.theme,e.customClass].join(" ");e.handle=this.data(h+"-handle"),e.content=this.data(h+"-content"),e.handleClasses=[g.handle,g.handle.replace(t,a),n?g.handle.replace(t,n):"",e.handleGuid,i].join(" "),e.thisClasses=[g.nav.replace(t,a),n?g.nav.replace(t,n):"",i],e.contentClasses=[g.content.replace(t,a),i].join(" "),e.contentClassesOpen=[n?g.content.replace(t,n):"",g.open].join(" "),e.$nav=this.addClass(e.thisClasses.join(" ")).attr("role","navigation"),e.$handle=s(e.handle).addClass(e.handleClasses),e.$content=s(e.content).addClass(e.contentClasses),e.$animate=s().add(e.$nav).add(e.$content),function(e){if(e.label)if(1<e.$handle.length){e.originalLabel=[];for(var t=0,a=e.$handle.length;t<a;t++)e.originalLabel[t]=e.$handle.eq(t).html()}else e.originalLabel=e.$handle.html()}(e),e.navTabIndex=e.$nav.attr("tabindex"),e.$nav.attr("tabindex",-1),e.id=this.attr("id"),e.id?e.ariaId=e.id:(e.ariaId=e.rawGuid,this.attr("id",e.ariaId)),e.$handle.attr("data-swap-target",e.dotGuid).attr("data-swap-linked",e.handleGuid).attr("data-swap-group",g.base).attr("tabindex",0).on("activate.swap"+e.dotGuid,e,c).on("deactivate.swap"+e.dotGuid,e,d).on("enable.swap"+e.dotGuid,e,u).on("disable.swap"+e.dotGuid,e,p).on(m.focus+e.dotGuid,e,o).on(m.blur+e.dotGuid,e,r).fsSwap({maxWidth:e.maxWidth,classes:{target:e.dotGuid,enabled:f.enabled,active:f.open,raw:{target:e.rawGuid,enabled:g.enabled,active:g.open}}}),e.$handle.is("a, button")||e.$handle.on(m.keyPress+e.dotGuid,e,l)},_destruct:function(e){e.$content.removeClass([e.contentClasses,e.contentClassesOpen].join(" ")).off(m.namespace),e.$handle.removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("data-swap-target").removeData("swap-target").removeAttr("data-swap-linked").removeAttr("data-swap-group").removeData("swap-linked").removeData("tabindex").removeClass(e.handleClasses).off(e.dotGuid).html(e.originalLabel).fsSwap("destroy"),e.$nav.attr("tabindex",e.navTabIndex),i(e),n(e),this.removeAttr("aria-hidden").removeClass(e.thisClasses.join(" ")).off(m.namespace),this.attr("id")===e.rawGuid&&this.removeAttr("id")},open:function(e){e.$handle.fsSwap("activate")},close:a,enable:function(e){e.$handle.fsSwap("enable")},disable:function(e){e.$handle.fsSwap("disable")}}}),h=t.namespace,f=t.classes,g=f.raw,m=t.events,v=t.functions,w=null;e.Ready(function(){w=s("html, body")})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(n,e){"use strict";function a(e,t){if(e.enabled&&!e.active){e.group&&!t&&n(e.group).not(e.$el).not(e.linked)[r.namespaceClean]("deactivate",!0);var a=e.group?n(e.group).index(e.$el):null;e.$swaps.addClass(e.classes.raw.active),t||e.linked&&n(e.linked).not(e.$el)[r.namespaceClean]("activate",!0),this.trigger(d.activate,[a]),e.active=!0}}function i(e,t){e.enabled&&e.active&&(e.$swaps.removeClass(e.classes.raw.active),t||e.linked&&n(e.linked).not(e.$el)[r.namespaceClean]("deactivate",!0),this.trigger(d.deactivate),e.active=!1)}function t(e,t){e.enabled||(e.enabled=!0,e.$swaps.addClass(e.classes.raw.enabled),t||n(e.linked).not(e.$el)[r.namespaceClean]("enable"),this.trigger(d.enable),e.onEnable?(e.active=!1,a.call(this,e)):(e.active=!0,i.call(this,e)))}function s(e,t){e.enabled&&(e.enabled=!1,e.$swaps.removeClass([e.classes.raw.enabled,e.classes.raw.active].join(" ")),t||n(e.linked).not(e.$el)[r.namespaceClean]("disable"),this.trigger(d.disable))}function o(e){u.killEvent(e);var t=e.data;t.active&&t.collapse?i.call(t.$el,t):a.call(t.$el,t)}var r=e.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:function(e){e.enabled=!1,e.active=!1,e.classes=n.extend(!0,{},c,e.classes),e.target=this.data(l+"-target"),e.$target=n(e.target).addClass(e.classes.raw.target),e.mq="(max-width:"+(e.maxWidth===1/0?"100000px":e.maxWidth)+")";var t=this.data(l+"-linked");e.linked=!!t&&"[data-"+l+'-linked="'+t+'"]';var a=this.data(l+"-group");e.group=!!a&&"[data-"+l+'-group="'+a+'"]',e.$swaps=n().add(this).add(e.$target),this.on(d.click+e.dotGuid,e,o)},_postConstruct:function(e){e.collapse||!e.group||n(e.group).filter("[data-"+l+"-active]").length||n(e.group).eq(0).attr("data-"+l+"-active","true"),e.onEnable=this.data(l+"-active")||!1,n.fsMediaquery("bind",e.rawGuid,e.mq,{enter:function(){t.call(e.$el,e,!0)},leave:function(){s.call(e.$el,e,!0)}})},_destruct:function(e){n.fsMediaquery("unbind",e.rawGuid),e.$swaps.removeClass([e.classes.raw.enabled,e.classes.raw.active].join(" ")).off(d.namespace)},activate:a,deactivate:i,enable:t,disable:s}}),l=r.namespace,c=r.classes,d=r.events,u=r.functions}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(r,i){"use strict";function s(e){e.stopPropagation(),e.preventDefault();var t=e.data,a=e.originalEvent,n=t.target?t.$target:t.$el;t.property&&a.propertyName!==t.property||!r(a.target).is(n)||o(t)}function o(e){e.always||e.$el[t.namespaceClean]("destroy"),e.callback.apply(e.$el)}function l(e){var t=c(e.$check);(function(e,t){if(r.type(e)!==r.type(t))return!1;for(var a in e){if(!e.hasOwnProperty(a))return!1;if(!e.hasOwnProperty(a)||!t.hasOwnProperty(a)||e[a]!==t[a])return!1}return!0})(e.styles,t)||o(e),e.styles=t}function c(e){var t,a,n,i={};if(e instanceof r&&(e=e[0]),p.getComputedStyle)for(var s=0,o=(t=p.getComputedStyle(e,null)).length;s<o;s++)a=t[s],n=t.getPropertyValue(a),i[a]=n;else if(e.currentStyle)for(a in t=e.currentStyle)i[a]=t[a];return i}var t=i.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:function(e,t){if(t){e.$target=this.find(e.target),e.$check=e.target?e.$target:this,e.callback=t,e.styles=c(e.$check),e.timer=null;var a=e.$check.css(i.transition+"-duration"),n=parseFloat(a);i.support.transition&&a&&n?this.on(d.transitionEnd,e,s):e.timer=u.startTimer(e.timer,50,function(){l(e)},!0)}},_destruct:function(e){u.clearTimer(e.timer,!0),this.off(d.namespace)},resolve:o}}),d=t.events,u=t.functions,p=i.window}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./touch"],e):e(jQuery,Formstone)}(function(u,p){"use strict";function h(){Y=u(j.base)}function f(e){e.enabled&&(W.clearTimer(e.autoTimer),e.enabled=!1,e.$subordinate.off(q.update),this.removeClass([_.enabled,_.animated].join(" ")).off(q.namespace),e.$canister.fsTouch("destroy").off(q.namespace).attr("style","").css(O,"none"),e.$items.css({width:"",height:""}).removeClass([_.visible,j.item_previous,j.item_next].join(" ")),e.$images.off(q.namespace),e.$controlItems.off(q.namespace),e.$pagination.html("").off(q.namespace),w(e),e.useMargin?e.$canister.css({marginLeft:""}):e.$canister.css(E,""),e.index=0)}function g(a){a.enabled||(a.enabled=!0,this.addClass(_.enabled),a.$controlItems.on(q.click,a,o),a.$pagination.on(q.click,j.page,a,r),a.$items.on(q.click,a,$),a.$subordinate.on(q.update,a,x),x({data:a},0),a.$canister.fsTouch({axis:"x",pan:!0,swipe:!0}).on(q.panStart,a,l).on(q.pan,a,c).on(q.panEnd,a,d).on(q.swipe,a,y).on(q.focusIn,a,C).css(O,""),m(a),a.$images.on(q.load,a,s),a.autoAdvance&&(a.autoTimer=W.startTimer(a.autoTimer,a.autoTime,function(){var e,t;(t=(e=a).index+1)>=e.pageCount&&(t=0),v(e,t)},!0)),n.call(this,a))}function n(e){if(e.enabled){var t,a,n,i,s;if(e.count=e.$items.length,e.count<1)return w(e),void e.$canister.css({height:""});if(this.removeClass(_.animated),e.containerWidth=e.$container.outerWidth(!1),e.visible=function(e){var t=1;if(e.single)return t;if("array"===u.type(e.show))for(var a in e.show)e.show.hasOwnProperty(a)&&(p.support.matchMedia?e.show[a].mq.matches&&(t=e.show[a].count):e.show[a].width<p.fallbackWidth&&(t=e.show[a].count));else t=e.show;return e.fill&&e.count<t?e.count:t}(e),e.perPage=e.paged?1:e.visible,e.itemMarginLeft=parseInt(e.$items.eq(0).css("marginLeft")),e.itemMarginRight=parseInt(e.$items.eq(0).css("marginRight")),e.itemMargin=e.itemMarginLeft+e.itemMarginRight,isNaN(e.itemMargin)&&(e.itemMargin=0),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.matchWidth)e.canisterWidth=e.single?e.containerWidth:(e.itemWidth+e.itemMargin)*e.count;else for(e.canisterWidth=0,e.$canister.css({width:1e6}),t=0;t<e.count;t++)e.canisterWidth+=e.$items.eq(t).outerWidth(!0);e.$canister.css({width:e.canisterWidth,height:""}),e.$items.css({width:e.matchWidth?e.itemWidth:"",height:""}).removeClass([_.visible,_.item_previous,_.item_next].join(" ")),e.pages=[];var o,r=0,l=0;for(i=n=0,a=u(),t=0;t<e.count;t++)o=e.$items.eq(t),r=e.matchWidth?e.itemWidth+e.itemMargin:o.outerWidth(!0),l=o.outerHeight(),(n+r>e.containerWidth+e.itemMargin||e.paged&&0<t)&&(s=(e.rtl?a.eq(a.length-1):a.eq(0)).position().left,e.pages.push({left:e.rtl?s-(e.canisterWidth-n):s,height:i,width:n,$items:a}),a=u(),n=i=0),a=a.add(o),n+=r,r,i<l&&(i=l),i>e.itemHeight&&(e.itemHeight=i);e.rtl?a.eq(a.length-1):a.eq(0),s=e.canisterWidth-e.containerWidth-(e.rtl?e.itemMarginLeft:e.itemMarginRight),e.pages.push({left:e.rtl?-s:s,height:i,width:n,$items:a}),e.pageCount=e.pages.length,e.paged&&(e.pageCount-=e.count%e.visible),e.pageCount<=0&&(e.pageCount=1),e.maxMove=-e.pages[e.pageCount-1].left,e.autoHeight?e.$canister.css({height:e.pages[0].height}):e.matchHeight&&e.$items.css({height:e.itemHeight});var c="";for(t=0;t<e.pageCount;t++)c+='<button type="button" class="'+_.page+'">'+(t+1)+"</button>";e.$pagination.html(c),e.pageCount<=1?w(e):((d=e).$controls.addClass(_.visible),d.$controlItems.addClass(_.visible),d.$pagination.addClass(_.visible)),e.$paginationItems=e.$pagination.find(j.page),v(e,e.index,!1),setTimeout(function(){e.$el.addClass(_.animated)},5)}var d}function m(e){e.$items=e.$canister.children().not(":hidden").addClass(_.item),e.$images=e.$canister.find("img"),e.totalImages=e.$images.length}function t(e,t){e.$images.off(q.namespace),!1!==t&&e.$canister.html(t),e.index=0,m(e),n.call(this,e)}function e(e,t,a,n,i){e.enabled&&(W.clearTimer(e.autoTimer),void 0===i&&(i=!0),v(e,t-1,i,a,n))}function a(e){var t=e.index-1;e.infinite&&t<0&&(t=e.pageCount-1),v(e,t)}function i(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),v(e,t)}function s(e){var t=e.data;t.resizeTimer=W.startTimer(t.resizeTimer,1,function(){n.call(t.$el,t)})}function o(e){W.killEvent(e);var t=e.data,a=t.index+(u(e.currentTarget).hasClass(_.control_next)?1:-1);W.clearTimer(t.autoTimer),v(t,a)}function r(e){W.killEvent(e);var t=e.data,a=t.$paginationItems.index(u(e.currentTarget));W.clearTimer(t.autoTimer),v(t,a)}function v(e,t,a,n,i){if(t<0&&(t=e.infinite?e.pageCount-1:0),t>=e.pageCount&&(t=e.infinite?0:e.pageCount-1),!(e.count<1)){e.pages[t]&&(e.leftPosition=-e.pages[t].left),e.leftPosition=k(e,e.leftPosition),e.useMargin?e.$canister.css({marginLeft:e.leftPosition}):!1===a?(e.$canister.css(O,"none").css(E,"translateX("+e.leftPosition+"px)"),setTimeout(function(){e.$canister.css(O,"")},5)):e.$canister.css(E,"translateX("+e.leftPosition+"px)"),e.$items.removeClass([_.visible,_.item_previous,_.item_next].join(" "));for(var s=0,o=e.pages.length;s<o;s++)s===t?e.pages[s].$items.addClass(_.visible).attr("aria-hidden","false"):e.pages[s].$items.not(e.pages[t].$items).addClass(s<t?_.item_previous:_.item_next).attr("aria-hidden","true");e.autoHeight&&e.$canister.css({height:e.pages[t].height}),!1!==a&&!0!==n&&t!==e.index&&(e.infinite||-1<t&&t<e.pageCount)&&e.$el.trigger(q.update,[t]),e.index=t,e.linked&&!0!==i&&u(e.linked).not(e.$el)[I]("jumpPage",e.index+1,!0,!0),(r=e).$paginationItems.removeClass(_.active).eq(r.index).addClass(_.active),r.infinite?r.$controlItems.addClass(_.visible):r.pageCount<1?r.$controlItems.removeClass(_.visible):(r.$controlItems.addClass(_.visible),r.index<=0?r.$controlPrevious.removeClass(_.visible):(r.index>=r.pageCount-1||!r.single&&r.leftPosition===r.maxMove)&&r.$controlNext.removeClass(_.visible))}var r}function w(e){e.$controls.removeClass(_.visible),e.$controlItems.removeClass(_.visible),e.$pagination.removeClass(_.visible)}function l(e,t){var a=e.data;if(W.clearTimer(a.autoTimer),!a.single){if(a.useMargin)a.leftPosition=parseInt(a.$canister.css("marginLeft"));else{var n=a.$canister.css(E).split(",");a.leftPosition=parseInt(n[4])}if(a.$canister.css(O,"none").css("will-change","transform"),c(e),a.linked&&!0!==t){var i=e.deltaX/a.pageWidth;a.rtl&&(i*=-1),u(a.linked).not(a.$el)[I]("panStart",i)}}a.isTouching=!0}function c(e,t){var a=e.data;if(!a.single&&(a.touchLeft=k(a,a.leftPosition+e.deltaX),a.useMargin?a.$canister.css({marginLeft:a.touchLeft}):a.$canister.css(E,"translateX("+a.touchLeft+"px)"),a.linked&&!0!==t)){var n=e.deltaX/a.pageWidth;a.rtl&&(n*=-1),u(a.linked).not(a.$el)[I]("pan",n)}}function d(e,t){var a=e.data,n=Math.abs(e.deltaX),i=P(a,e),s=!1;if(a.didPan=!1,0==i)s=a.index;else{if(!a.single){var o,r,l=Math.abs(a.touchLeft),c=!1,d=a.rtl?"right":"left";if(e.directionX===d)for(o=0,r=a.pages.length;o<r;o++)c=a.pages[o],l>Math.abs(c.left)+20&&(s=o+1);else for(o=a.pages.length-1,r=0;r<=o;o--)c=a.pages[o],l<Math.abs(c.left)&&(s=o-1)}!1===s&&(s=n<50?a.index:a.index+i)}s!==a.index&&(a.didPan=!0),a.linked&&!0!==t&&u(a.linked).not(a.$el)[I]("panEnd",s),b(a,s)}function y(e,t){var a=e.data,n=P(a,e),i=a.index+n;a.linked&&!0!==t&&u(a.linked).not(a.$el)[I]("swipe",e.directionX),b(a,i)}function b(e,t){e.$canister.css(O,"").css("will-change",""),v(e,t),e.isTouching=!1}function $(e){var t=e.data,a=u(e.currentTarget);if(!t.didPan&&(a.trigger(q.itemClick),t.controller)){var n=t.$items.index(a);x(e,n),t.$subordinate[I]("jumpPage",n+1,!0)}}function C(e){var t=e.data;if(t.enabled&&!t.isTouching){W.clearTimer(t.autoTimer),t.$container.scrollLeft(0);var a,n=u(e.target);n.hasClass(_.item)?a=n:n.parents(j.item).length&&(a=n.parents(j.item).eq(0));for(var i=0;i<t.pageCount;i++)if(t.pages[i].$items.is(a)){v(t,i);break}}}function x(e,t){var a=e.data;if(a.controller){var n=a.$items.eq(t);a.$items.removeClass(_.active),n.addClass(_.active);for(var i=0;i<a.pageCount;i++)if(a.pages[i].$items.is(n)){v(a,i,!0,!0);break}}}function k(e,t){return isNaN(t)?t=0:e.rtl?(t>e.maxMove&&(t=e.maxMove),t<0&&(t=0)):(t<e.maxMove&&(t=e.maxMove),0<t&&(t=0)),t}function P(e,t){return Math.abs(t.deltaX)<Math.abs(t.deltaY)?0:e.rtl?"right"===t.directionX?1:-1:"left"===t.directionX?1:-1}var T=p.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,contained:!0,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous",controls:"Carousel {guid} Controls",pagination:"Carousel {guid} Pagination"},matchHeight:!1,matchWidth:!0,maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,rtl:!1,show:1,single:!1,theme:"fs-light",useMargin:!1},classes:["ltr","rtl","viewport","wrapper","container","canister","item","item_previous","item_next","controls","controls_custom","control","control_previous","control_next","pagination","page","animated","enabled","visible","active","auto_height","contained","single"],events:{itemClick:"itemClick",update:"update"},methods:{_construct:function(e){var t;e.didPan=!1,e.carouselClasses=[_.base,e.theme,e.customClass,e.rtl?_.rtl:_.ltr],e.maxWidth=e.maxWidth===1/0?"100000px":e.maxWidth,e.mq="(min-width:"+e.minWidth+") and (max-width:"+e.maxWidth+")",e.customControls="object"===u.type(e.controls)&&e.controls.previous&&e.controls.next,e.customPagination="string"===u.type(e.pagination),e.id=this.attr("id"),e.id?e.ariaId=e.id:(e.ariaId=e.rawGuid,this.attr("id",e.ariaId)),p.support.transform||(e.useMargin=!0);var a="",n="",i=[_.control,_.control_previous].join(" "),s=[_.control,_.control_next].join(" ");e.controls&&!e.customControls&&(e.labels.controls=e.labels.controls.replace("{guid}",e.numGuid),a+='<div class="'+_.controls+'" aria-label="'+e.labels.controls+'" aria-controls="'+e.ariaId+'">',a+='<button type="button" class="'+i+'" aria-label="'+e.labels.previous+'">'+e.labels.previous+"</button>",a+='<button type="button" class="'+s+'" aria-label="'+e.labels.next+'">'+e.labels.next+"</button>",a+="</div>"),e.pagination&&!e.customPagination&&(e.labels.pagination=e.labels.pagination.replace("{guid}",e.numGuid),n+='<div class="'+_.pagination+'" aria-label="'+e.labels.pagination+'" aria-controls="'+e.ariaId+'" role="navigation">',n+="</div>"),e.autoHeight&&e.carouselClasses.push(_.auto_height),e.contained&&e.carouselClasses.push(_.contained),e.single&&e.carouselClasses.push(_.single),this.addClass(e.carouselClasses.join(" ")).wrapInner('<div class="'+_.wrapper+'" aria-live="polite"><div class="'+_.container+'"><div class="'+_.canister+'"></div></div></div>').append(a).wrapInner('<div class="'+_.viewport+'"></div>').append(n),e.$viewport=this.find(j.viewport).eq(0),e.$container=this.find(j.container).eq(0),e.$canister=this.find(j.canister).eq(0),e.$pagination=this.find(j.pagination).eq(0),e.$controlPrevious=e.$controlNext=u(""),e.customControls?(e.$controls=u(e.controls.container).addClass([_.controls,_.controls_custom].join(" ")),e.$controlPrevious=u(e.controls.previous).addClass(i),e.$controlNext=u(e.controls.next).addClass(s)):(e.$controls=this.find(j.controls).eq(0),e.$controlPrevious=e.$controls.find(j.control_previous),e.$controlNext=e.$controls.find(j.control_next)),e.$controlItems=e.$controlPrevious.add(e.$controlNext),e.customPagination&&(e.$pagination=u(e.pagination).addClass([_.pagination])),e.$paginationItems=e.$pagination.find(j.page),e.index=0,e.enabled=!1,e.leftPosition=0,e.autoTimer=null,e.resizeTimer=null;var o=this.data(M+"-linked");e.linked=!!o&&"[data-"+M+'-linked="'+o+'"]',e.linked&&(e.paged=!0);var r=this.data(M+"-controller-for")||"";if(e.$subordinate=u(r),e.$subordinate.length&&(e.controller=!0),"object"===u.type(e.show)){var l=e.show,c=[],d=[];for(t in l)l.hasOwnProperty(t)&&d.push(t);for(t in d.sort(W.sortAsc),d)d.hasOwnProperty(t)&&c.push({width:parseInt(d[t]),count:l[d[t]],mq:window.matchMedia("(min-width: "+parseInt(d[t])+"px)")});e.show=c}m(e),u.fsMediaquery("bind",e.rawGuid,e.mq,{enter:function(){g.call(e.$el,e)},leave:function(){f.call(e.$el,e)}}),h(),e.carouselClasses.push(_.enabled),e.carouselClasses.push(_.animated)},_destruct:function(e){W.clearTimer(e.autoTimer),W.clearTimer(e.resizeTimer),f.call(this,e),u.fsMediaquery("unbind",e.rawGuid),e.id!==e.ariaId&&this.removeAttr("id"),e.$controlItems.removeClass([j.control,_.control_previous,j.control_next,j.visible].join(" ")).off(q.namespace),e.$images.off(q.namespace),e.$canister.fsTouch("destroy"),e.$items.removeClass([_.item,_.visible,j.item_previous,j.item_next].join(" ")).unwrap().unwrap().unwrap().unwrap(),e.controls&&!e.customControls&&e.$controls.remove(),e.customControls&&e.$controls.removeClass([_.controls,_.controls_custom,_.visible].join(" ")),e.pagination&&!e.customPagination&&e.$pagination.remove(),e.customPagination&&e.$pagination.html("").removeClass([_.pagination,_.visible].join(" ")),this.removeClass(e.carouselClasses.join(" ")),h()},_resize:function(e){W.iterate.call(Y,n)},disable:f,enable:g,jump:e,previous:a,next:i,jumpPage:e,previousPage:a,nextPage:i,jumpItem:function(e,t,a,n,i){if(e.enabled){W.clearTimer(e.autoTimer);var s=e.$items.eq(t-1);void 0===i&&(i=!0);for(var o=0;o<e.pageCount;o++)if(e.pages[o].$items.is(s)){v(e,o,i,a,n);break}}},reset:function(e){e.enabled&&t.call(this,e,!1)},resize:n,update:t,panStart:function(e,t){if(W.clearTimer(e.autoTimer),!e.single){if(e.rtl&&(t*=-1),e.useMargin)e.leftPosition=parseInt(e.$canister.css("marginLeft"));else{var a=e.$canister.css(E).split(",");e.leftPosition=parseInt(a[4])}e.$canister.css(O,"none"),c({data:e,deltaX:e.pageWidth*t},!0)}e.isTouching=!0},pan:function(e,t){if(!e.single){e.rtl&&(t*=-1);var a=e.pageWidth*t;e.touchLeft=k(e,e.leftPosition+a),e.useMargin?e.$canister.css({marginLeft:e.touchLeft}):e.$canister.css(E,"translateX("+e.touchLeft+"px)")}},panEnd:function(e,t){b(e,t)},swipe:function(e,t){y({data:e,directionX:t},!0)}}}),M=T.namespace,I=T.namespaceClean,j=T.classes,_=j.raw,q=T.events,W=T.functions,Y=[],E=p.transform,O=p.transition}),function(e){Formstone.Ready(function(){e(".mobile-navigation").navigation({type:"overlay",gravity:"right",maxWidth:"992px",label:!1}),e(".slides").carousel({infinite:!0,controls:!1})})}(jQuery);